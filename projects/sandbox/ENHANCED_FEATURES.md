# FastGPT Pythonæ²™ç›’å¢å¼ºç‰ˆåŠŸèƒ½è¯´æ˜

## ğŸ¯ å¢å¼ºåŠŸèƒ½æ¦‚è§ˆ

æœ¬æ¬¡å¢å¼ºä¸»è¦è§£å†³äº†Pythonæ²™ç›’çš„ä»¥ä¸‹é—®é¢˜å¹¶æ·»åŠ äº†æ–°åŠŸèƒ½ï¼š

### âœ… å·²ä¿®å¤çš„é—®é¢˜
1. **APIå“åº”æ ¼å¼é”™è¯¯** - ä¿®å¤äº†è¿”å›æ•°æ®æ ¼å¼ä¸æ­£ç¡®çš„é—®é¢˜
2. **ä¸­æ–‡å­—ä½“æ”¯æŒ** - è§£å†³äº†matplotlibä¸­æ–‡å­—ç¬¦æ˜¾ç¤ºé—®é¢˜
3. **å›¾ç‰‡ç”Ÿæˆä¼˜åŒ–** - æ”¹è¿›äº†matplotlibå›¾ç‰‡ç”Ÿæˆå’Œbase64è½¬æ¢

### ğŸš€ æ–°å¢åŠŸèƒ½
1. **å¢å¼ºçš„åŒ…ç®¡ç†** - è‡ªåŠ¨å®‰è£…ç¼ºå¤±çš„PythonåŒ…
2. **å®‰å…¨æœºåˆ¶å¼ºåŒ–** - æ›´ä¸¥æ ¼çš„ä»£ç æ‰§è¡Œå®‰å…¨æ§åˆ¶
3. **å›¾ç‰‡ç”Ÿæˆæ”¯æŒ** - å®Œæ•´çš„matplotlibå›¾ç‰‡ç”Ÿæˆå’Œbase64è¿”å›
4. **å¤æ‚å‡½æ•°æ”¯æŒ** - æ”¯æŒåµŒå¥—å‡½æ•°å’Œå¤æ‚çš„æ•°æ®å¤„ç†

## ğŸ“‹ åŠŸèƒ½è¯¦æƒ…

### 1. åŸºæœ¬ä»£ç æ‰§è¡Œ
```json
{
  "code": "def main(data1, data2):\n    return {\n        \"result\": data1,\n        \"data2\": data2\n    }",
  "variables": {"data1": 1, "data2": 2}
}
```

**é¢„æœŸè¿”å›:**
```json
{
  "success": true,
  "data": {
    "codeReturn": {
      "result": 1,
      "data2": 2
    },
    "log": ""
  }
}
```

### 2. Matplotlibå›¾ç‰‡ç”Ÿæˆ
```json
{
  "code": "import matplotlib.pyplot as plt\n\n# ç¤ºä¾‹æ•°æ®\nx = [1, 2, 3, 4, 5]\ny = [10, 12, 15, 14, 16]\n\n# ç»˜åˆ¶æŠ˜çº¿å›¾\nplt.plot(x, y)\n\n# æ·»åŠ æ ‡é¢˜å’Œæ ‡ç­¾\nplt.title('æŠ˜çº¿å›¾ç¤ºä¾‹')\nplt.xlabel('Xè½´æ ‡ç­¾')\nplt.ylabel('Yè½´æ ‡ç­¾')\n\n# æ˜¾ç¤ºå›¾å½¢\nplt.show()",
  "variables": {}
}
```

**é¢„æœŸè¿”å›:**
```json
{
  "success": true,
  "data": {
    "codeReturn": {
      "matplotlib_images": [
        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA..."
      ]
    },
    "log": ""
  }
}
```

### 3. å¤æ‚æ•°æ®å¤„ç†
```json
{
  "code": "import pandas as pd\nimport numpy as np\n\ndef main(data):\n    df = pd.DataFrame({'x': np.random.randn(100), 'y': np.random.randn(100)})\n    return {\n        'mean_x': float(df['x'].mean()),\n        'correlation': float(df['x'].corr(df['y'])),\n        'shape': list(df.shape)\n    }",
  "variables": {"data": "test"}
}
```

## ğŸ”’ å®‰å…¨æœºåˆ¶

### 1. å±é™©æ¨¡å—æ£€æµ‹
ä»¥ä¸‹æ¨¡å—è¢«ç¦æ­¢å¯¼å…¥ï¼š
- `os`, `subprocess`, `shutil`, `socket`
- `ctypes`, `multiprocessing`, `threading`
- `pickle`, `tempfile`, `pathlib`
- `fileinput`, `glob`, `fnmatch`
- `zipfile`, `tarfile`, `gzip`, `bz2`, `lzma`
- `mmap`, `signal`, `resource`, `pwd`, `grp`

### 2. æ–‡ä»¶æ“ä½œé™åˆ¶
ç¦æ­¢çš„æ–‡ä»¶æ“ä½œï¼š
- `open()`, `file()`, `write()`, `writelines()`
- `mkdir`, `makedirs`, `rmdir`, `removedirs`
- `unlink`, `remove`, `rename`, `replace`

### 3. ç³»ç»Ÿè°ƒç”¨é™åˆ¶
ä½¿ç”¨seccompé™åˆ¶ç³»ç»Ÿè°ƒç”¨ï¼Œåªå…è®¸å¿…è¦çš„ç³»ç»Ÿè°ƒç”¨ã€‚

## ğŸ¨ ä¸­æ–‡å­—ä½“æ”¯æŒ

### å­—ä½“ä¼˜å…ˆçº§
1. Noto Sans CJK SC (ç®€ä½“ä¸­æ–‡)
2. Noto Sans CJK TC (ç¹ä½“ä¸­æ–‡)
3. SimHei, Microsoft YaHei
4. DejaVu Sans (å¤‡ç”¨)

### å­—ä½“é…ç½®
- è‡ªåŠ¨æ£€æµ‹å¯ç”¨å­—ä½“
- è®¾ç½®unicodeè´Ÿå·æ˜¾ç¤º
- ä¼˜åŒ–å­—ä½“å¤§å°å’ŒDPIè®¾ç½®

## ğŸ“¦ æ”¯æŒçš„åŒ…

### é¢„è£…åŒ…
- `numpy`, `pandas`, `matplotlib`, `seaborn`
- `plotly`, `requests`, `beautifulsoup4`
- `scipy`, `scikit-learn`, `pillow`
- `opencv-python`, `jupyter`, `ipython`
- `tqdm`, `sympy`, `openpyxl`, `bokeh`

### è‡ªåŠ¨å®‰è£…
- æ™ºèƒ½åŒ…åæ˜ å°„
- ä¾èµ–å…³ç³»å¤„ç†
- å¤šç§å®‰è£…æ–¹å¼å°è¯•

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. æ„å»ºé•œåƒ
```bash
./build_and_test.sh
```

### 2. å¯åŠ¨æœåŠ¡
```bash
docker run -d -p 3005:3005 fastgpt-sandbox-enhanced
```

### 3. æµ‹è¯•API
```bash
python3 test_complete_api.py
```

### 4. å¥åº·æ£€æŸ¥
```bash
curl http://localhost:3005/sandbox
```

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### 1. ä»£ç æ‰§è¡Œæµç¨‹
1. æ¥æ”¶å‰ç«¯è¯·æ±‚ (`code` + `variables`)
2. åˆ›å»ºä¸´æ—¶ç›®å½•å’Œæ–‡ä»¶
3. è‡ªåŠ¨å®‰è£…ç¼ºå¤±çš„åŒ…
4. å®‰å…¨æ£€æŸ¥ï¼ˆå±é™©æ¨¡å—ã€æ–‡ä»¶æ“ä½œï¼‰
5. æ‰§è¡ŒPythonä»£ç 
6. å¤„ç†matplotlibå›¾ç‰‡
7. è¿”å›JSONæ ¼å¼ç»“æœ

### 2. å›¾ç‰‡å¤„ç†
- è‡ªåŠ¨æ£€æµ‹matplotlibå›¾å½¢
- è½¬æ¢ä¸ºbase64æ ¼å¼
- æ”¯æŒå¤šä¸ªå›¾å½¢
- å†…å­˜ä¼˜åŒ–å’Œæ¸…ç†

### 3. é”™è¯¯å¤„ç†
- è¶…æ—¶æ§åˆ¶ï¼ˆ60ç§’ï¼‰
- å¼‚å¸¸æ•è·å’ŒæŠ¥å‘Š
- èµ„æºæ¸…ç†
- å®‰å…¨é”™è¯¯æç¤º

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

1. **åŒ…ç¼“å­˜** - é¿å…é‡å¤å®‰è£…å·²å­˜åœ¨çš„åŒ…
2. **å†…å­˜ç®¡ç†** - åŠæ—¶æ¸…ç†matplotlibå›¾å½¢
3. **å¹¶å‘æ§åˆ¶** - é™åˆ¶åŒæ—¶æ‰§è¡Œçš„ä»£ç æ•°é‡
4. **èµ„æºæ¸…ç†** - è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ä¸­æ–‡å­—ä½“æ˜¾ç¤ºé—®é¢˜**
   - æ£€æŸ¥Dockeré•œåƒæ˜¯å¦åŒ…å«Notoå­—ä½“
   - éªŒè¯å­—ä½“ç¼“å­˜æ˜¯å¦æ­£ç¡®

2. **åŒ…å®‰è£…å¤±è´¥**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - éªŒè¯åŒ…åæ˜¯å¦æ­£ç¡®

3. **å›¾ç‰‡ç”Ÿæˆå¤±è´¥**
   - æ£€æŸ¥matplotlibæ˜¯å¦æ­£ç¡®å®‰è£…
   - éªŒè¯ä»£ç è¯­æ³•æ˜¯å¦æ­£ç¡®

4. **å®‰å…¨é™åˆ¶è§¦å‘**
   - æ£€æŸ¥ä»£ç æ˜¯å¦åŒ…å«å±é™©æ“ä½œ
   - éªŒè¯å¯¼å…¥çš„æ¨¡å—æ˜¯å¦è¢«å…è®¸

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (å½“å‰ç‰ˆæœ¬)
- âœ… ä¿®å¤APIå“åº”æ ¼å¼é—®é¢˜
- âœ… æ·»åŠ ä¸­æ–‡å­—ä½“æ”¯æŒ
- âœ… å¢å¼ºmatplotlibå›¾ç‰‡ç”Ÿæˆ
- âœ… å¼ºåŒ–å®‰å…¨æœºåˆ¶
- âœ… ä¼˜åŒ–åŒ…ç®¡ç†
- âœ… æ·»åŠ å®Œæ•´æµ‹è¯•å¥—ä»¶

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. è¿è¡Œæµ‹è¯•
5. åˆ›å»ºPull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦è§LICENSEæ–‡ä»¶ã€‚